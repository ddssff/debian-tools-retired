#!/usr/bin/make -f

DEB_CABAL_PACKAGE = artvaluereport2

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/hlibrary.mk

build/artvaluereport2-staging:: build-ghc-stamp
build/artvaluereport2-server:: build-ghc-stamp
build/artvaluereport2-production:: build-ghc-stamp
build/artvaluereport2-development:: build-ghc-stamp
build/artvaluereport2-backups:: build-ghc-stamp

binary-fixup/artvaluereport2-staging::
	install -Dp dist-ghc/build/artvaluereport2-server/artvaluereport2-server debian/artvaluereport2-staging/usr/bin/artvaluereport2-staging

binary-fixup/artvaluereport2-production::
	install -Dp dist-ghc/build/artvaluereport2-server/artvaluereport2-server debian/artvaluereport2-production/usr/bin/artvaluereport2-production

binary-fixup/artvaluereport2-development::
	install -Dp dist-ghc/build/artvaluereport2-server/artvaluereport2-server debian/artvaluereport2-development/usr/bin/artvaluereport2-development

binary-fixup/artvaluereport2-server::
	for i in Udon.js flexbox.css DataTables-1.8.2 html5sortable jGFeed searchMag.png Clouds.jpg tweaks.css verticalTabs.css blueprint jquery.blockUI jquery.tinyscrollbar ; do \
	  find $$i -type f -print | while read i; do install -D $$i debian/artvaluereport2-server/usr/share/artvaluereport2-data/$$i; done; done
	for i in ArtValueReport_SunsetSpectrum.ico; do install -D theme/$$i debian/artvaluereport2-server/usr/share/artvaluereport2-data/$$i; done

binary-fixup/artvaluereport2-backups::
	install -Dps -m 755 dist-ghc/build/artvaluereport2-backups/artvaluereport2-backups debian/artvaluereport2-backups/etc/cron.hourly/artvaluereport2
